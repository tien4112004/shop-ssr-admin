const f="http://localhost:3000",S=`${f}/access`;async function m(e,n,t,r,l){const a=localStorage.getItem("token");if(l&&!a)throw new Error("Please login to proceed");for(const s in t)t[s]===void 0&&delete t[s];const i=new URLSearchParams(t).toString(),g=`${n}${i?`?${i}`:""}`,c=await fetch(g,{method:e,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(r)}),o=await c.json();if(!c.ok)throw new Error(o.message);return o==null?void 0:o.metadata}class p{static async login(n,t){const{token:r,profile:l}=await m("POST",`${S}/api/admin/login`,null,{username:n,password:t},!1);localStorage.setItem("token",r),localStorage.setItem("profile",JSON.stringify(l))}static logout(){if(!localStorage.getItem("token"))throw new Error("Can not logout without login");localStorage.removeItem("token")}}console.log(localStorage.getItem("profile"));const u=JSON.parse(localStorage.getItem("profile"));document.querySelector("p.profile-name").textContent=u.fullname;document.querySelector("a.profile-link").addEventListener("click",e=>{e.preventDefault(),window.location.href="/profile-admin.html"});document.querySelector("button.sign-out").addEventListener("click",e=>{e.preventDefault(),p.logout(),window.location.href="/login"});
